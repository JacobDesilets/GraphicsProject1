<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="style.css">
</head>

<title>Snake Graphics</title>


<!-- Snake shader -->
<script id="snake-vertex" type="x-shader/x-vertex">
  #version 300 es

  in vec4 aPosition;
  out vec4 vColor;

  void main()
  {
    gl_Position = aPosition;
    vColor = vec4(gl_Position.x, gl_Position.y, 1.0, 1.0);
  }
</script>

<script id="snake-fragment" type="x-shader/x-fragment">
  #version 300 es

  precision mediump float;
  out vec4 fColor;
  in vec4 vColor;
  uniform float lastDashed;
  uniform vec4 head;

  void main()
  {
    float dashed = min(lastDashed/10.0, 1.0);
    fColor = vColor;
    fColor[0] = max(1.0-dashed*distance(head, vColor) + abs(vColor[0]), 0.0);
    fColor[1] = max(1.0-dashed*distance(head, vColor) + abs(vColor[1]), 0.0);
    fColor[2] = max(1.0-dashed*distance(head, vColor), 0.0);
  }
</script>


<!-- Food shader -->
<script id="food-vertex" type="x-shader/x-vertex">
  #version 300 es

  in vec4 aPosition;
  uniform mat3 Mr;
  uniform mat3 Ms;
  uniform mat3 Mt;
  
  out vec4 vColor;

  void main()
  {
    vec3 pos = (Mt * Mr * Ms * vec3(aPosition.x, aPosition.y, 1.0));

    gl_Position = vec4(pos, 1.0);
    vColor = vec4(gl_Position.x, gl_Position.y, 1.0, 1.0);
  }
</script>

<script id="food-fragment" type="x-shader/x-fragment">
  #version 300 es

  precision mediump float;

  uniform float opacity;

  out vec4 fColor;
  in vec4 vColor;

  void main()
  {
    fColor = vec4(vColor[0], vColor[1], vColor[2], opacity);
  }
</script>

<script type="text/javascript" src="../Common/initShaders.js"></script>
<script type="text/javascript" src="../Common/MVnew.js"></script>
<script type="text/javascript" src="util.js"></script>
<script type="text/javascript" src="snake.js"></script>
<script type="text/javascript" src="food.js"></script>
<script type="text/javascript" src="main.js"></script>

<body style="background-color: rgb(50, 50, 50)">
  <div class="container">
    <canvas id="gl-canvas" width="800" height="800">
      Oops ... your browser doesn't support the HTML5 canvas element
    </canvas>
    <canvas id="text-canvas" width="800" height="800">
    </canvas>
  </div>
</body>
</html>
